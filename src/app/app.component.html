<mat-progress-bar
  *ngIf="isLoading$ | async"
  mode="indeterminate"
></mat-progress-bar>
<ace-header (openAuthDialog)="onOpenAuthDialog()"></ace-header>
<mat-drawer-container>
  <mat-drawer #drawer mode="over">
    <mat-selection-list [multiple]="false">
      <mat-list-option [matMenuTriggerFor]="auctionsMenu">
        <mat-icon mat-list-icon>monetization_on</mat-icon>
        Licitații
      </mat-list-option>
      <mat-menu #auctionsMenu="matMenu">
        <button
          mat-menu-item
          (click)="drawer.close()"
          routerLink="/auctions/live"
        >
          <mat-icon>sensors</mat-icon>
          <span class="live">Live</span>
        </button>
        <button
          mat-menu-item
          (click)="drawer.close()"
          routerLink="/auctions/closed"
        >
          <mat-icon>gavel</mat-icon>
          <span>Închise</span>
        </button>
      </mat-menu>
      <mat-list-option (click)="drawer.close()" routerLink="/about">
        <mat-icon mat-list-icon>help</mat-icon>
        Despre noi
      </mat-list-option>
      <mat-list-option
        (click)="drawer.close()"
        (click)="onOpenAuthDialog()"
        *ngIf="(loggedUser$ | async) === null"
      >
        <mat-icon mat-list-icon>account_circle</mat-icon>
        Conectează-te
      </mat-list-option>
      <mat-list-option
        [matMenuTriggerFor]="accountMenu"
        *ngIf="loggedUser$ | async"
      >
        <mat-icon mat-list-icon>account_circle</mat-icon>
        Contul meu
      </mat-list-option>
      <mat-menu #accountMenu="matMenu">
        <button mat-menu-item (click)="drawer.close()" routerLink="/account">
          <mat-icon>person</mat-icon>
          <span> {{ (loggedUser$ | async)?.username }}</span>
        </button>
        <button mat-menu-item (click)="drawer.close()" (click)="onLogout()">
          <mat-icon>power_settings_new</mat-icon>
          <span class="warn">Deconectare</span>
        </button>
      </mat-menu>
    </mat-selection-list>
  </mat-drawer>
  <mat-drawer-content>
    <div class="flex flex-end">
      <button mat-button *ngIf="!environment.production" (click)="onDEV()">
        <mat-icon>architecture</mat-icon>
      </button>
      <span>
        <button
          *ngIf="themeClass === ThemesEnum.LIGHT_THEME"
          mat-icon-button
          (click)="onChangeTheme(ThemesEnum.DARK_THEME)"
        >
          <mat-icon>brightness_4</mat-icon>
        </button>
        <button
          *ngIf="themeClass === ThemesEnum.DARK_THEME"
          mat-icon-button
          (click)="onChangeTheme(ThemesEnum.LIGHT_THEME)"
        >
          <mat-icon class="accent">brightness_5</mat-icon>
        </button>
      </span>
    </div>
    <router-outlet></router-outlet>
    <button id="drawer-btn" mat-fab color="primary" (click)="drawer.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
  </mat-drawer-content>
</mat-drawer-container>
